{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dinhd\\\\Desktop\\\\Test\\\\frontend\\\\src\\\\components\\\\VideoRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Room, VideoPresets, RoomEvent, RemoteParticipant, LocalParticipant, RemoteTrackPublication, LocalTrackPublication, Participant, Track, createLocalTracks } from 'livekit-client';\nimport './VideoRoom.css';\nimport { Participant as ParticipantComponent } from './Participant';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const VideoRoom = ({\n  token,\n  url,\n  roomName,\n  participantName,\n  onLeaveRoom\n}) => {\n  _s();\n  const [room, setRoom] = useState(null);\n  const [participants, setParticipants] = useState([]);\n  const [localParticipant, setLocalParticipant] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n  const [isScreenSharing, setIsScreenSharing] = useState(false);\n  const [activeScreenShare, setActiveScreenShare] = useState(null);\n  const [error, setError] = useState('');\n\n  // Connect to the room when component mounts\n  useEffect(() => {\n    let roomInstance = null;\n    const connect = async () => {\n      try {\n        // Create a new room instance\n        roomInstance = new Room({\n          adaptiveStream: true,\n          dynacast: true,\n          stopMicTrackOnMute: false\n        });\n        setRoom(roomInstance);\n\n        // Set up event listeners\n        setupRoomEventListeners(roomInstance);\n\n        // Connect to the LiveKit room\n        await roomInstance.connect(url, token);\n        setIsConnected(true);\n\n        // Enable camera and microphone\n        const tracks = await createLocalTracks({\n          audio: true,\n          video: true,\n          videoPreset: VideoPresets.h720\n        });\n        await roomInstance.localParticipant.publishTracks(tracks);\n        setLocalParticipant(roomInstance.localParticipant);\n\n        // Update participants list\n        updateParticipants(roomInstance);\n      } catch (err) {\n        console.error('Error connecting to room:', err);\n        setError(err.message || 'Failed to connect to room');\n      }\n    };\n    connect();\n\n    // Clean up when component unmounts\n    return () => {\n      if (roomInstance) {\n        roomInstance.disconnect();\n      }\n    };\n  }, [token, url]);\n\n  // Setup room event listeners\n  const setupRoomEventListeners = roomInstance => {\n    roomInstance.on(RoomEvent.ParticipantConnected, () => {\n      updateParticipants(roomInstance);\n    });\n    roomInstance.on(RoomEvent.ParticipantDisconnected, () => {\n      updateParticipants(roomInstance);\n    });\n    roomInstance.on(RoomEvent.TrackSubscribed, (track, publication, participant) => {\n      // Handle screen share\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.ScreenShare) {\n        setActiveScreenShare({\n          participant,\n          track\n        });\n      }\n      updateParticipants(roomInstance);\n    });\n    roomInstance.on(RoomEvent.TrackUnsubscribed, (track, publication, participant) => {\n      // Handle screen share ended\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.ScreenShare) {\n        setActiveScreenShare(null);\n      }\n      updateParticipants(roomInstance);\n    });\n    roomInstance.on(RoomEvent.Disconnected, () => {\n      setIsConnected(false);\n      onLeaveRoom();\n    });\n  };\n\n  // Update the participants state\n  const updateParticipants = roomInstance => {\n    if (!roomInstance) return;\n    const remotes = Array.from(roomInstance.remoteParticipants.values());\n    setParticipants(remotes);\n  };\n\n  // Toggle video\n  const toggleVideo = async () => {\n    if (!room || !localParticipant) return;\n    try {\n      // Get video track\n      const videoTracks = localParticipant.getTracks(Track.Source.Camera);\n      if (videoTracks.length === 0) {\n        // Publish new video track if not available\n        if (isVideoEnabled) {\n          const tracks = await createLocalTracks({\n            video: true,\n            videoPreset: VideoPresets.h720\n          });\n          await localParticipant.publishTracks(tracks);\n        }\n      } else {\n        // Toggle existing video track\n        for (const publication of videoTracks) {\n          if (isVideoEnabled) {\n            await publication.mute();\n          } else {\n            await publication.unmute();\n          }\n        }\n      }\n      setIsVideoEnabled(!isVideoEnabled);\n    } catch (err) {\n      console.error('Error toggling video:', err);\n      setError('Failed to toggle video');\n    }\n  };\n\n  // Toggle audio\n  const toggleAudio = async () => {\n    if (!room || !localParticipant) return;\n    try {\n      // Get audio track\n      const audioTracks = localParticipant.getTracks(Track.Source.Microphone);\n      if (audioTracks.length === 0) {\n        // Publish new audio track if not available\n        if (isAudioEnabled) {\n          const tracks = await createLocalTracks({\n            audio: true\n          });\n          await localParticipant.publishTracks(tracks);\n        }\n      } else {\n        // Toggle existing audio track\n        for (const publication of audioTracks) {\n          if (isAudioEnabled) {\n            await publication.mute();\n          } else {\n            await publication.unmute();\n          }\n        }\n      }\n      setIsAudioEnabled(!isAudioEnabled);\n    } catch (err) {\n      console.error('Error toggling audio:', err);\n      setError('Failed to toggle audio');\n    }\n  };\n\n  // Toggle screen sharing\n  const toggleScreenShare = async () => {\n    if (!room || !localParticipant) return;\n    try {\n      if (!isScreenSharing) {\n        // Start screen sharing\n        const screenTrack = await createLocalTracks({\n          video: {\n            source: Track.Source.ScreenShare\n          }\n        });\n\n        // Publish screen track\n        await localParticipant.publishTracks(screenTrack);\n        setIsScreenSharing(true);\n      } else {\n        // Stop screen sharing\n        const screenTracks = localParticipant.getTracks(Track.Source.ScreenShare);\n        for (const publication of screenTracks) {\n          await localParticipant.unpublishTrack(publication.track);\n        }\n        setIsScreenSharing(false);\n      }\n    } catch (err) {\n      console.error('Error toggling screen share:', err);\n      // User cancelled the screen share selection\n      if (err.name === 'NotAllowedError') {\n        return;\n      }\n      setError('Failed to toggle screen share');\n    }\n  };\n\n  // Leave room\n  const leaveRoom = () => {\n    if (room) {\n      room.disconnect();\n      setIsConnected(false);\n      onLeaveRoom();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-room\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: roomName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${!isVideoEnabled ? 'disabled' : ''}`,\n          onClick: toggleVideo,\n          children: isVideoEnabled ? 'Turn Off Camera' : 'Turn On Camera'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${!isAudioEnabled ? 'disabled' : ''}`,\n          onClick: toggleAudio,\n          children: isAudioEnabled ? 'Mute Mic' : 'Unmute Mic'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-button ${isScreenSharing ? 'active' : ''}`,\n          onClick: toggleScreenShare,\n          children: isScreenSharing ? 'Stop Sharing' : 'Share Screen'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-button leave\",\n          onClick: leaveRoom,\n          children: \"Leave Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `participants-container ${activeScreenShare ? 'with-screen-share' : ''}`,\n      children: [activeScreenShare && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"screen-share\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"screen-share-video\",\n          id: \"screen-share-video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"participants\",\n        children: [localParticipant && /*#__PURE__*/_jsxDEV(ParticipantComponent, {\n          participant: localParticipant,\n          isLocal: true\n        }, \"local\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), participants.map(participant => /*#__PURE__*/_jsxDEV(ParticipantComponent, {\n          participant: participant,\n          isLocal: false\n        }, participant.sid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoRoom, \"2xxrOZgy2m4ejXh239YtEz0VMf0=\");\n_c = VideoRoom;\nvar _c;\n$RefreshReg$(_c, \"VideoRoom\");","map":{"version":3,"names":["React","useEffect","useState","Room","VideoPresets","RoomEvent","RemoteParticipant","LocalParticipant","RemoteTrackPublication","LocalTrackPublication","Participant","Track","createLocalTracks","ParticipantComponent","jsxDEV","_jsxDEV","VideoRoom","token","url","roomName","participantName","onLeaveRoom","_s","room","setRoom","participants","setParticipants","localParticipant","setLocalParticipant","isConnected","setIsConnected","isVideoEnabled","setIsVideoEnabled","isAudioEnabled","setIsAudioEnabled","isScreenSharing","setIsScreenSharing","activeScreenShare","setActiveScreenShare","error","setError","roomInstance","connect","adaptiveStream","dynacast","stopMicTrackOnMute","setupRoomEventListeners","tracks","audio","video","videoPreset","h720","publishTracks","updateParticipants","err","console","message","disconnect","on","ParticipantConnected","ParticipantDisconnected","TrackSubscribed","track","publication","participant","kind","Kind","Video","source","Source","ScreenShare","TrackUnsubscribed","Disconnected","remotes","Array","from","remoteParticipants","values","toggleVideo","videoTracks","getTracks","Camera","length","mute","unmute","toggleAudio","audioTracks","Microphone","toggleScreenShare","screenTrack","screenTracks","unpublishTrack","name","leaveRoom","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","id","isLocal","map","sid","_c","$RefreshReg$"],"sources":["C:/Users/dinhd/Desktop/Test/frontend/src/components/VideoRoom.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Room,\r\n  VideoPresets,\r\n  RoomEvent,\r\n  RemoteParticipant,\r\n  LocalParticipant,\r\n  RemoteTrackPublication,\r\n  LocalTrackPublication,\r\n  Participant,\r\n  Track,\r\n  createLocalTracks\r\n} from 'livekit-client';\r\nimport './VideoRoom.css';\r\nimport { Participant as ParticipantComponent } from './Participant';\r\n\r\nexport const VideoRoom = ({ token, url, roomName, participantName, onLeaveRoom }) => {\r\n  const [room, setRoom] = useState(null);\r\n  const [participants, setParticipants] = useState([]);\r\n  const [localParticipant, setLocalParticipant] = useState(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\r\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\r\n  const [isScreenSharing, setIsScreenSharing] = useState(false);\r\n  const [activeScreenShare, setActiveScreenShare] = useState(null);\r\n  const [error, setError] = useState('');\r\n\r\n  // Connect to the room when component mounts\r\n  useEffect(() => {\r\n    let roomInstance = null;\r\n\r\n    const connect = async () => {\r\n      try {\r\n        // Create a new room instance\r\n        roomInstance = new Room({\r\n          adaptiveStream: true,\r\n          dynacast: true,\r\n          stopMicTrackOnMute: false,\r\n        });\r\n        \r\n        setRoom(roomInstance);\r\n\r\n        // Set up event listeners\r\n        setupRoomEventListeners(roomInstance);\r\n        \r\n        // Connect to the LiveKit room\r\n        await roomInstance.connect(url, token);\r\n        setIsConnected(true);\r\n        \r\n        // Enable camera and microphone\r\n        const tracks = await createLocalTracks({\r\n          audio: true,\r\n          video: true,\r\n          videoPreset: VideoPresets.h720\r\n        });\r\n        \r\n        await roomInstance.localParticipant.publishTracks(tracks);\r\n        setLocalParticipant(roomInstance.localParticipant);\r\n        \r\n        // Update participants list\r\n        updateParticipants(roomInstance);\r\n      } catch (err) {\r\n        console.error('Error connecting to room:', err);\r\n        setError(err.message || 'Failed to connect to room');\r\n      }\r\n    };\r\n\r\n    connect();\r\n\r\n    // Clean up when component unmounts\r\n    return () => {\r\n      if (roomInstance) {\r\n        roomInstance.disconnect();\r\n      }\r\n    };\r\n  }, [token, url]);\r\n\r\n  // Setup room event listeners\r\n  const setupRoomEventListeners = (roomInstance) => {\r\n    roomInstance.on(RoomEvent.ParticipantConnected, () => {\r\n      updateParticipants(roomInstance);\r\n    });\r\n    \r\n    roomInstance.on(RoomEvent.ParticipantDisconnected, () => {\r\n      updateParticipants(roomInstance);\r\n    });\r\n    \r\n    roomInstance.on(RoomEvent.TrackSubscribed, (track, publication, participant) => {\r\n      // Handle screen share\r\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.ScreenShare) {\r\n        setActiveScreenShare({\r\n          participant,\r\n          track\r\n        });\r\n      }\r\n      updateParticipants(roomInstance);\r\n    });\r\n    \r\n    roomInstance.on(RoomEvent.TrackUnsubscribed, (track, publication, participant) => {\r\n      // Handle screen share ended\r\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.ScreenShare) {\r\n        setActiveScreenShare(null);\r\n      }\r\n      updateParticipants(roomInstance);\r\n    });\r\n    \r\n    roomInstance.on(RoomEvent.Disconnected, () => {\r\n      setIsConnected(false);\r\n      onLeaveRoom();\r\n    });\r\n  };\r\n\r\n  // Update the participants state\r\n  const updateParticipants = (roomInstance) => {\r\n    if (!roomInstance) return;\r\n    \r\n    const remotes = Array.from(roomInstance.remoteParticipants.values());\r\n    setParticipants(remotes);\r\n  };\r\n\r\n  // Toggle video\r\n  const toggleVideo = async () => {\r\n    if (!room || !localParticipant) return;\r\n    \r\n    try {\r\n      // Get video track\r\n      const videoTracks = localParticipant.getTracks(Track.Source.Camera);\r\n      \r\n      if (videoTracks.length === 0) {\r\n        // Publish new video track if not available\r\n        if (isVideoEnabled) {\r\n          const tracks = await createLocalTracks({\r\n            video: true,\r\n            videoPreset: VideoPresets.h720\r\n          });\r\n          await localParticipant.publishTracks(tracks);\r\n        }\r\n      } else {\r\n        // Toggle existing video track\r\n        for (const publication of videoTracks) {\r\n          if (isVideoEnabled) {\r\n            await publication.mute();\r\n          } else {\r\n            await publication.unmute();\r\n          }\r\n        }\r\n      }\r\n      \r\n      setIsVideoEnabled(!isVideoEnabled);\r\n    } catch (err) {\r\n      console.error('Error toggling video:', err);\r\n      setError('Failed to toggle video');\r\n    }\r\n  };\r\n\r\n  // Toggle audio\r\n  const toggleAudio = async () => {\r\n    if (!room || !localParticipant) return;\r\n    \r\n    try {\r\n      // Get audio track\r\n      const audioTracks = localParticipant.getTracks(Track.Source.Microphone);\r\n      \r\n      if (audioTracks.length === 0) {\r\n        // Publish new audio track if not available\r\n        if (isAudioEnabled) {\r\n          const tracks = await createLocalTracks({\r\n            audio: true\r\n          });\r\n          await localParticipant.publishTracks(tracks);\r\n        }\r\n      } else {\r\n        // Toggle existing audio track\r\n        for (const publication of audioTracks) {\r\n          if (isAudioEnabled) {\r\n            await publication.mute();\r\n          } else {\r\n            await publication.unmute();\r\n          }\r\n        }\r\n      }\r\n      \r\n      setIsAudioEnabled(!isAudioEnabled);\r\n    } catch (err) {\r\n      console.error('Error toggling audio:', err);\r\n      setError('Failed to toggle audio');\r\n    }\r\n  };\r\n\r\n  // Toggle screen sharing\r\n  const toggleScreenShare = async () => {\r\n    if (!room || !localParticipant) return;\r\n    \r\n    try {\r\n      if (!isScreenSharing) {\r\n        // Start screen sharing\r\n        const screenTrack = await createLocalTracks({\r\n          video: {\r\n            source: Track.Source.ScreenShare\r\n          }\r\n        });\r\n        \r\n        // Publish screen track\r\n        await localParticipant.publishTracks(screenTrack);\r\n        setIsScreenSharing(true);\r\n      } else {\r\n        // Stop screen sharing\r\n        const screenTracks = localParticipant.getTracks(Track.Source.ScreenShare);\r\n        \r\n        for (const publication of screenTracks) {\r\n          await localParticipant.unpublishTrack(publication.track);\r\n        }\r\n        \r\n        setIsScreenSharing(false);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error toggling screen share:', err);\r\n      // User cancelled the screen share selection\r\n      if (err.name === 'NotAllowedError') {\r\n        return;\r\n      }\r\n      setError('Failed to toggle screen share');\r\n    }\r\n  };\r\n\r\n  // Leave room\r\n  const leaveRoom = () => {\r\n    if (room) {\r\n      room.disconnect();\r\n      setIsConnected(false);\r\n      onLeaveRoom();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"video-room\">\r\n      <div className=\"room-header\">\r\n        <h2>{roomName}</h2>\r\n        <div className=\"controls\">\r\n          <button\r\n            className={`control-button ${!isVideoEnabled ? 'disabled' : ''}`}\r\n            onClick={toggleVideo}\r\n          >\r\n            {isVideoEnabled ? 'Turn Off Camera' : 'Turn On Camera'}\r\n          </button>\r\n          <button\r\n            className={`control-button ${!isAudioEnabled ? 'disabled' : ''}`}\r\n            onClick={toggleAudio}\r\n          >\r\n            {isAudioEnabled ? 'Mute Mic' : 'Unmute Mic'}\r\n          </button>\r\n          <button\r\n            className={`control-button ${isScreenSharing ? 'active' : ''}`}\r\n            onClick={toggleScreenShare}\r\n          >\r\n            {isScreenSharing ? 'Stop Sharing' : 'Share Screen'}\r\n          </button>\r\n          <button className=\"control-button leave\" onClick={leaveRoom}>\r\n            Leave Room\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {error && <div className=\"error\">{error}</div>}\r\n\r\n      <div className={`participants-container ${activeScreenShare ? 'with-screen-share' : ''}`}>\r\n        {activeScreenShare && (\r\n          <div className=\"screen-share\">\r\n            <div className=\"screen-share-video\" id=\"screen-share-video\"></div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"participants\">\r\n          {localParticipant && (\r\n            <ParticipantComponent\r\n              key=\"local\"\r\n              participant={localParticipant}\r\n              isLocal={true}\r\n            />\r\n          )}\r\n          \r\n          {participants.map(participant => (\r\n            <ParticipantComponent\r\n              key={participant.sid}\r\n              participant={participant}\r\n              isLocal={false}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}