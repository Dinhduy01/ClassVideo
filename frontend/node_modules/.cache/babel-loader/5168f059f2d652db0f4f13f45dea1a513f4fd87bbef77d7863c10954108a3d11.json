{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dinhd\\\\Desktop\\\\Test\\\\frontend\\\\src\\\\components\\\\Participant.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Track } from 'livekit-client';\nimport './Participant.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Participant = ({\n  participant,\n  isLocal\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const audioRef = useRef(null);\n  const [videoTrack, setVideoTrack] = useState(null);\n  const [audioTrack, setAudioTrack] = useState(null);\n  const [isVideoMuted, setIsVideoMuted] = useState(false);\n  const [isAudioMuted, setIsAudioMuted] = useState(false);\n  useEffect(() => {\n    // Function to handle track subscription\n    const handleTrack = track => {\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.Camera) {\n        setVideoTrack(track);\n        setIsVideoMuted(track.isMuted);\n        if (videoRef.current) {\n          track.attach(videoRef.current);\n        }\n      } else if (track.kind === Track.Kind.Audio && track.source === Track.Source.Microphone) {\n        setAudioTrack(track);\n        setIsAudioMuted(track.isMuted);\n        if (audioRef.current) {\n          track.attach(audioRef.current);\n        }\n      }\n    };\n\n    // Get all tracks from the participant\n    const tracks = participant.getTracks();\n    tracks.forEach(publication => {\n      if (publication.isSubscribed && publication.track) {\n        handleTrack(publication.track);\n      }\n    });\n\n    // Set up event listeners for the participant\n    const onTrackSubscribed = (track, publication) => handleTrack(track);\n    const onTrackUnsubscribed = (track, publication) => {\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.Camera) {\n        if (videoRef.current) {\n          track.detach(videoRef.current);\n        }\n        setVideoTrack(null);\n      } else if (track.kind === Track.Kind.Audio && track.source === Track.Source.Microphone) {\n        if (audioRef.current) {\n          track.detach(audioRef.current);\n        }\n        setAudioTrack(null);\n      }\n    };\n    const onMuted = () => {\n      if (videoTrack && videoTrack.source === Track.Source.Camera) {\n        setIsVideoMuted(true);\n      }\n      if (audioTrack && audioTrack.source === Track.Source.Microphone) {\n        setIsAudioMuted(true);\n      }\n    };\n    const onUnmuted = () => {\n      if (videoTrack && videoTrack.source === Track.Source.Camera) {\n        setIsVideoMuted(false);\n      }\n      if (audioTrack && audioTrack.source === Track.Source.Microphone) {\n        setIsAudioMuted(false);\n      }\n    };\n    participant.on('trackSubscribed', onTrackSubscribed);\n    participant.on('trackUnsubscribed', onTrackUnsubscribed);\n    participant.on('trackMuted', onMuted);\n    participant.on('trackUnmuted', onUnmuted);\n\n    // Clean up when component unmounts\n    return () => {\n      participant.off('trackSubscribed', onTrackSubscribed);\n      participant.off('trackUnsubscribed', onTrackUnsubscribed);\n      participant.off('trackMuted', onMuted);\n      participant.off('trackUnmuted', onUnmuted);\n      if (videoTrack) {\n        videoTrack.detach();\n      }\n      if (audioTrack) {\n        audioTrack.detach();\n      }\n    };\n  }, [participant]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `participant ${isLocal ? 'local' : 'remote'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        muted: isLocal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), isVideoMuted && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-muted\",\n        children: \"Camera Off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: audioRef,\n        autoPlay: true,\n        muted: isLocal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"participant-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"name\",\n        children: [participant.identity, \" \", isLocal && '(You)']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"indicators\",\n        children: isAudioMuted && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"indicator muted\",\n          children: \"\\uD83D\\uDD07\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 28\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n_s(Participant, \"5cx3WxEL372Yt0yckfGx1aTQosg=\");\n_c = Participant;\nvar _c;\n$RefreshReg$(_c, \"Participant\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Track","jsxDEV","_jsxDEV","Participant","participant","isLocal","_s","videoRef","audioRef","videoTrack","setVideoTrack","audioTrack","setAudioTrack","isVideoMuted","setIsVideoMuted","isAudioMuted","setIsAudioMuted","handleTrack","track","kind","Kind","Video","source","Source","Camera","isMuted","current","attach","Audio","Microphone","tracks","getTracks","forEach","publication","isSubscribed","onTrackSubscribed","onTrackUnsubscribed","detach","onMuted","onUnmuted","on","off","className","children","ref","autoPlay","playsInline","muted","fileName","_jsxFileName","lineNumber","columnNumber","identity","_c","$RefreshReg$"],"sources":["C:/Users/dinhd/Desktop/Test/frontend/src/components/Participant.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Track } from 'livekit-client';\r\nimport './Participant.css';\r\n\r\nexport const Participant = ({ participant, isLocal }) => {\r\n  const videoRef = useRef(null);\r\n  const audioRef = useRef(null);\r\n  const [videoTrack, setVideoTrack] = useState(null);\r\n  const [audioTrack, setAudioTrack] = useState(null);\r\n  const [isVideoMuted, setIsVideoMuted] = useState(false);\r\n  const [isAudioMuted, setIsAudioMuted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Function to handle track subscription\r\n    const handleTrack = (track) => {\r\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.Camera) {\r\n        setVideoTrack(track);\r\n        setIsVideoMuted(track.isMuted);\r\n        if (videoRef.current) {\r\n          track.attach(videoRef.current);\r\n        }\r\n      } else if (track.kind === Track.Kind.Audio && track.source === Track.Source.Microphone) {\r\n        setAudioTrack(track);\r\n        setIsAudioMuted(track.isMuted);\r\n        if (audioRef.current) {\r\n          track.attach(audioRef.current);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Get all tracks from the participant\r\n    const tracks = participant.getTracks();\r\n    tracks.forEach(publication => {\r\n      if (publication.isSubscribed && publication.track) {\r\n        handleTrack(publication.track);\r\n      }\r\n    });\r\n\r\n    // Set up event listeners for the participant\r\n    const onTrackSubscribed = (track, publication) => handleTrack(track);\r\n    const onTrackUnsubscribed = (track, publication) => {\r\n      if (track.kind === Track.Kind.Video && track.source === Track.Source.Camera) {\r\n        if (videoRef.current) {\r\n          track.detach(videoRef.current);\r\n        }\r\n        setVideoTrack(null);\r\n      } else if (track.kind === Track.Kind.Audio && track.source === Track.Source.Microphone) {\r\n        if (audioRef.current) {\r\n          track.detach(audioRef.current);\r\n        }\r\n        setAudioTrack(null);\r\n      }\r\n    };\r\n    const onMuted = () => {\r\n      if (videoTrack && videoTrack.source === Track.Source.Camera) {\r\n        setIsVideoMuted(true);\r\n      }\r\n      if (audioTrack && audioTrack.source === Track.Source.Microphone) {\r\n        setIsAudioMuted(true);\r\n      }\r\n    };\r\n    const onUnmuted = () => {\r\n      if (videoTrack && videoTrack.source === Track.Source.Camera) {\r\n        setIsVideoMuted(false);\r\n      }\r\n      if (audioTrack && audioTrack.source === Track.Source.Microphone) {\r\n        setIsAudioMuted(false);\r\n      }\r\n    };\r\n\r\n    participant.on('trackSubscribed', onTrackSubscribed);\r\n    participant.on('trackUnsubscribed', onTrackUnsubscribed);\r\n    participant.on('trackMuted', onMuted);\r\n    participant.on('trackUnmuted', onUnmuted);\r\n\r\n    // Clean up when component unmounts\r\n    return () => {\r\n      participant.off('trackSubscribed', onTrackSubscribed);\r\n      participant.off('trackUnsubscribed', onTrackUnsubscribed);\r\n      participant.off('trackMuted', onMuted);\r\n      participant.off('trackUnmuted', onUnmuted);\r\n\r\n      if (videoTrack) {\r\n        videoTrack.detach();\r\n      }\r\n      if (audioTrack) {\r\n        audioTrack.detach();\r\n      }\r\n    };\r\n  }, [participant]);\r\n\r\n  return (\r\n    <div className={`participant ${isLocal ? 'local' : 'remote'}`}>\r\n      <div className=\"video-container\">\r\n        <video ref={videoRef} autoPlay playsInline muted={isLocal} />\r\n        {isVideoMuted && <div className=\"video-muted\">Camera Off</div>}\r\n        <audio ref={audioRef} autoPlay muted={isLocal} />\r\n      </div>\r\n      <div className=\"participant-info\">\r\n        <div className=\"name\">{participant.identity} {isLocal && '(You)'}</div>\r\n        <div className=\"indicators\">\r\n          {isAudioMuted && <span className=\"indicator muted\">ðŸ”‡</span>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}